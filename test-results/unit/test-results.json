{
  "success": false,
  "code": 1,
  "signal": null,
  "duration": 33586,
  "stdout": "jest-haste-map: Haste module naming collision: p1-import-subsystem-error-logging\n  The following files share their name; please adjust your hasteImpl:\n    * <rootDir>/error-logging-subsystem/package.json\n    * <rootDir>/error-logging-subsystem/P1-import-Subsystem/package.json\n\n  \u001b[2mconsole.log\u001b[22m\n    üß™ Test setup completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mtest/setup-tests.cjs\u001b[2m:64:9)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üß™ Test setup completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mtest/setup-tests.cjs\u001b[2m:64:9)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üß™ Test setup completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mtest/setup-tests.cjs\u001b[2m:64:9)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    \n    üöÄ STARTING BULLETPROOF TOKEN MANAGER TESTS: 2025-08-20T11:17:06.916Z\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:110:13)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    =====================================================================\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:111:13)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.info\u001b[22m\n    üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Created\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat new BulletproofTokenManager (\u001b[22m\u001b[2msrc/client/utils/bulletproof-token-manager.js\u001b[2m:38:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: emergency-token-status\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2m\u001b[31mconsole.error\u001b[39m\u001b[22m\n\u001b[31m    Error: Uncaught [Error: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[31m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[31m\u001b[2m)\u001b[22m\u001b[39m\n\u001b[31m    \u001b[39m\n\u001b[31m    Expected: \u001b[32mStringContaining \"DOM validation\"\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m    Received\u001b[39m\n\u001b[31m           1: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM elements cached\"\u001b[39m\u001b[31m, \u001b[31m{\"countdown\": false, \"getTokenBtn\": true, \"icon\": true, \"statusBox\": true, \"text\": true}\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m           2: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM observer setup failed\"\u001b[39m\u001b[31m, \u001b[31m[TypeError: Failed to execute 'observe' on 'MutationObserver': parameter 1 is not of type 'Node'.]\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m           3: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Emergency fallback timer started\"\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m    \u001b[39m\n\u001b[31m    Number of calls: \u001b[31m4\u001b[39m\u001b[31m]\u001b[39m\n\u001b[31m        at reportException (/Users/cmuir/P1Import-apps/P1-import-Subsystem/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)\u001b[39m\n\u001b[31m        at Timeout.task [as _onTimeout] (/Users/cmuir/P1Import-apps/P1-import-Subsystem/node_modules/jsdom/lib/jsdom/browser/Window.js:584:9)\u001b[39m\n\u001b[31m        at listOnTimeout (node:internal/timers:588:17)\u001b[39m\n\u001b[31m        at processTimers (node:internal/timers:523:7) {\u001b[39m\n\u001b[31m      detail: JestAssertionError: \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[31m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[31m\u001b[2m)\u001b[22m\u001b[39m\n\u001b[31m      \u001b[39m\n\u001b[31m      Expected: \u001b[32mStringContaining \"DOM validation\"\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m      Received\u001b[39m\n\u001b[31m             1: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM elements cached\"\u001b[39m\u001b[31m, \u001b[31m{\"countdown\": false, \"getTokenBtn\": true, \"icon\": true, \"statusBox\": true, \"text\": true}\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m             2: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM observer setup failed\"\u001b[39m\u001b[31m, \u001b[31m[TypeError: Failed to execute 'observe' on 'MutationObserver': parameter 1 is not of type 'Node'.]\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m             3: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Emergency fallback timer started\"\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m      \u001b[39m\n\u001b[31m      Number of calls: \u001b[31m4\u001b[39m\u001b[31m\u001b[39m\n\u001b[31m          at /Users/cmuir/P1Import-apps/P1-import-Subsystem/test/unit/bulletproof-token-manager.test.js:338:42\u001b[39m\n\u001b[31m          at Timeout.task [as _onTimeout] (/Users/cmuir/P1Import-apps/P1-import-Subsystem/node_modules/jsdom/lib/jsdom/browser/Window.js:579:19)\u001b[39m\n\u001b[31m          at listOnTimeout (node:internal/timers:588:17)\u001b[39m\n\u001b[31m          at processTimers (node:internal/timers:523:7) {\u001b[39m\n\u001b[31m        matcherResult: {\u001b[39m\n\u001b[31m          message: '\\x1B[2mexpect(\\x1B[22m\\x1B[31mjest.fn()\\x1B[39m\\x1B[2m).\\x1B[22mtoHaveBeenCalledWith\\x1B[2m(\\x1B[22m\\x1B[32m...expected\\x1B[39m\\x1B[2m)\\x1B[22m\\n' +\u001b[39m\n\u001b[31m            '\\n' +\u001b[39m\n\u001b[31m            'Expected: \\x1B[32mStringContaining \"DOM validation\"\\x1B[39m\\n' +\u001b[39m\n\u001b[31m            'Received\\n' +\u001b[39m\n\u001b[31m            '       1: \\x1B[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM elements cached\"\\x1B[39m, \\x1B[31m{\"countdown\": false, \"getTokenBtn\": true, \"icon\": true, \"statusBox\": true, \"text\": true}\\x1B[39m\\n' +\u001b[39m\n\u001b[31m            `       2: \\x1B[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM observer setup failed\"\\x1B[39m, \\x1B[31m[TypeError: Failed to execute 'observe' on 'MutationObserver': parameter 1 is not of type 'Node'.]\\x1B[39m\\n` +\u001b[39m\n\u001b[31m            '       3: \\x1B[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Emergency fallback timer started\"\\x1B[39m\\n' +\u001b[39m\n\u001b[31m            '\\n' +\u001b[39m\n\u001b[31m            'Number of calls: \\x1B[31m4\\x1B[39m',\u001b[39m\n\u001b[31m          pass: false\u001b[39m\n\u001b[31m        }\u001b[39m\n\u001b[31m      },\u001b[39m\n\u001b[31m      type: 'unhandled exception'\u001b[39m\n\u001b[31m    }\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat VirtualConsole.<anonymous> (\u001b[22m\u001b[2mnode_modules/@jest/environment-jsdom-abstract/build/index.js\u001b[2m:78:23)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat reportException (\u001b[22m\u001b[2mnode_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js\u001b[2m:70:28)\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Timeout.task [as _onTimeout] (\u001b[22m\u001b[2mnode_modules/jsdom/lib/jsdom/browser/Window.js\u001b[2m:584:9)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-token-status\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: emergency-token-status\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üìã Starting Bulletproof Token Manager test case...\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:133:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    Creating missing element with id: global-get-token\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Document.document.getElementById (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:82:21)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úì Bulletproof Token Manager test case completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:176:17)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    =====================================================================\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:122:13)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚úÖ COMPLETED BULLETPROOF TOKEN MANAGER TESTS: 2025-08-20T11:17:37.472Z\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:123:13)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    ‚è±Ô∏è Test duration: 30.56 seconds\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:124:13)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    =====================================================================\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:125:13)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üß™ Test setup completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mtest/setup-tests.cjs\u001b[2m:64:9)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üß™ Test setup completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mtest/setup-tests.cjs\u001b[2m:64:9)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üß™ Test setup completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mtest/setup-tests.cjs\u001b[2m:64:9)\u001b[22m\u001b[2m\u001b[22m\n\n  \u001b[2mconsole.log\u001b[22m\n    üß™ Test setup completed\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2mtest/setup-tests.cjs\u001b[2m:64:9)\u001b[22m\u001b[2m\u001b[22m\n\n",
  "stderr": "\u001b[0m\u001b[7m\u001b[1m\u001b[31m FAIL \u001b[39m\u001b[22m\u001b[27m\u001b[0m \u001b[2mtest/unit/\u001b[22m\u001b[1madvanced-realtime.test.js\u001b[22m\n  \u001b[1m‚óè \u001b[22mTest suite failed to run\n\n    SyntaxError: Unexpected token '{'\n\n      \u001b[2mat Runtime.loadEsmModule (\u001b[22mnode_modules/jest-runtime/build/index.js\u001b[2m:521:20)\u001b[22m\n\n\nReferenceError: You are trying to `import` a file after the Jest environment has been torn down. From test/unit/ui-manager-core.test.js.\n\n\n\nReferenceError: You are trying to `import` a file after the Jest environment has been torn down. From test/unit/ui-manager-core.test.js.\n\n\n\nReferenceError: You are trying to `import` a file after the Jest environment has been torn down. From test/unit/ui-manager-core.test.js.\n\n\n\nReferenceError: You are trying to `import` a file after the Jest environment has been torn down. From test/unit/ui-manager-core.test.js.\n\n\n\nReferenceError: You are trying to `import` a file after the Jest environment has been torn down. From test/unit/ui-manager-core.test.js.\n\n\n\nReferenceError: You are trying to `import` a file after the Jest environment has been torn down. From test/unit/ui-manager-core.test.js.\n\n\n\nReferenceError: You are trying to `import` a file after the Jest environment has been torn down. From test/unit/ui-manager-core.test.js.\n\n\n\u001b[0m\u001b[7m\u001b[1m\u001b[31m FAIL \u001b[39m\u001b[22m\u001b[27m\u001b[0m \u001b[2mtest/unit/\u001b[22m\u001b[1mui-manager-core.test.js\u001b[22m\n  \u001b[1m‚óè \u001b[22mTest suite failed to run\n\n    Cannot find module '../../public/js/modules/utils/safe-dom.js' from 'test/unit/ui-manager-core.test.js'\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22mnode_modules/jest-resolve/build/index.js\u001b[2m:863:11)\u001b[22m\n\n(node:52130) ExperimentalWarning: VM Modules is an experimental feature and might change at any time\n(Use `node --trace-warnings ...` to show where the warning was created)\n\u001b[0m\u001b[7m\u001b[1m\u001b[31m FAIL \u001b[39m\u001b[22m\u001b[27m\u001b[0m \u001b[2mtest/unit/\u001b[22m\u001b[1mbulletproof-token-manager.test.js\u001b[22m (\u001b[0m\u001b[1m\u001b[41m30.854 s\u001b[49m\u001b[22m\u001b[0m)\n  üõ°Ô∏è Bulletproof Token Manager Tests\n    üèóÔ∏è Creation and Initialization\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould create bulletproof token manager successfully (7 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle creation with invalid logger gracefully (4 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould initialize with original token manager (10 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould handle initialization with null token manager (4 ms)\u001b[22m\n    üîç Token Information Retrieval\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould retrieve token info from original manager (7 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould fallback to localStorage when original manager fails (4 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould use cached data when available (4 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould provide emergency fallback when all sources fail (4 ms)\u001b[22m\n    üéØ DOM Management\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould cache DOM elements successfully (6 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould handle missing DOM elements gracefully (4 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould create emergency display when main display fails (5 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould validate cached elements periodically (30005 ms)\u001b[22m\n    ‚ö° Real-time Updates\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould format time correctly (8 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould update token display with time remaining (6 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould show expired status for expired tokens (5 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould show no token status when token is missing (4 ms)\u001b[22m\n    üîÑ Error Handling and Recovery\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould isolate errors in token info retrieval (5 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould isolate errors in DOM updates (4 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould recover from DOM element removal (2 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould handle multiple simultaneous errors gracefully (4 ms)\u001b[22m\n    üßπ Memory Management and Cleanup\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould clean up resources on destroy (4 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle destroy with no active resources (4 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould prevent memory leaks from intervals (307 ms)\u001b[22m\n    üé≠ Edge Cases and Stress Tests\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle rapid consecutive updates (7 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle DOM mutations during updates (4 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle invalid token data gracefully (3 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle localStorage corruption (5 ms)\u001b[22m\n    üîß Integration Tests\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould work with real DOM mutations (105 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould integrate with app cleanup lifecycle (4 ms)\u001b[22m\n  üõ°Ô∏è Bulletproof Token Manager Static Tests\n    \u001b[32m‚úì\u001b[39m \u001b[2mshould export createBulletproofTokenManager function\u001b[22m\n    \u001b[32m‚úì\u001b[39m \u001b[2mshould handle module import errors gracefully\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üèóÔ∏è Creation and Initialization ‚Ä∫ should initialize with original token manager\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"üõ°Ô∏è Bulletproof Token Manager initialized\"\u001b[39m\n    Received\n           1: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Created\"\u001b[39m\n           2: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Initializing...\"\u001b[39m\n           3: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Initialized successfully\"\u001b[39m\n\n    Number of calls: \u001b[31m3\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 194 |\u001b[39m             expect(wrappedManager)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 195 |\u001b[39m             expect(\u001b[36mtypeof\u001b[39m wrappedManager\u001b[33m.\u001b[39mupdateGlobalTokenStatus)\u001b[33m.\u001b[39mtoBe(\u001b[32m'function'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 196 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 197 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'üõ°Ô∏è Bulletproof Token Manager initialized'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 198 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 199 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:196:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üèóÔ∏è Creation and Initialization ‚Ä∫ should handle initialization with null token manager\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"No original token manager provided\"\u001b[39m\n    Received: \u001b[31m\"üõ°Ô∏è BULLETPROOF: Using fallback subsystem for GlobalTokenManagerSubsystem\"\u001b[39m\n\n    Number of calls: \u001b[31m1\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 203 |\u001b[39m             \u001b[22m\n\u001b[2m     \u001b[90m 204 |\u001b[39m             expect(wrappedManager)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 205 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39mwarn)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 206 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'No original token manager provided'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 207 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 208 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:205:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üîç Token Information Retrieval ‚Ä∫ should fallback to localStorage when original manager fails\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 238 |\u001b[39m             \u001b[22m\n\u001b[2m     \u001b[90m 239 |\u001b[39m             expect(tokenInfo)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 240 |\u001b[39m             expect(tokenInfo\u001b[33m.\u001b[39mhasToken)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 241 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39mwarn)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m 242 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'Original token manager failed'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 243 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:240:40)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üîç Token Information Retrieval ‚Ä∫ should use cached data when available\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mtrue\u001b[39m\n    Received: \u001b[31mundefined\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 257 |\u001b[39m             \u001b[22m\n\u001b[2m     \u001b[90m 258 |\u001b[39m             expect(tokenInfo)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 259 |\u001b[39m             expect(tokenInfo\u001b[33m.\u001b[39mhasToken)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 260 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 261 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 262 |\u001b[39m         test(\u001b[32m'should provide emergency fallback when all sources fail'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:259:40)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üîç Token Information Retrieval ‚Ä∫ should provide emergency fallback when all sources fail\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"Using emergency fallback\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 271 |\u001b[39m             expect(tokenInfo)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 272 |\u001b[39m             expect(tokenInfo\u001b[33m.\u001b[39mfallback)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 273 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39mwarn)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 274 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'Using emergency fallback'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 275 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 276 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:273:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üéØ DOM Management ‚Ä∫ should cache DOM elements successfully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"DOM elements cached\"\u001b[39m\n    Received\n           1: \u001b[2m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM elements cached\"\u001b[22m, \u001b[31m{\"countdown\": false, \"getTokenBtn\": true, \"icon\": true, \"statusBox\": true, \"text\": true}\u001b[39m\n           2: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM observer setup failed\"\u001b[39m, \u001b[31m[TypeError: Failed to execute 'observe' on 'MutationObserver': parameter 1 is not of type 'Node'.]\u001b[39m\n           3: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Emergency fallback timer started\"\u001b[39m\n\n    Number of calls: \u001b[31m4\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 291 |\u001b[39m             wrappedManager\u001b[33m.\u001b[39mupdateGlobalTokenStatus()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 292 |\u001b[39m             \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 293 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39mdebug)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 294 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'DOM elements cached'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 295 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 296 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:293:38)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üéØ DOM Management ‚Ä∫ should handle missing DOM elements gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"Token status element not found\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 306 |\u001b[39m             })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 307 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 308 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39mwarn)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 309 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'Token status element not found'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 310 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 311 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:308:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üéØ DOM Management ‚Ä∫ should create emergency display when main display fails\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected substring: \u001b[32m\"üõ°Ô∏è\"\u001b[39m\n    Received string:    \u001b[31m\"\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 320 |\u001b[39m             \u001b[36mconst\u001b[39m emergencyDisplay \u001b[33m=\u001b[39m document\u001b[33m.\u001b[39mgetElementById(\u001b[32m'emergency-token-status'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 321 |\u001b[39m             expect(emergencyDisplay)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 322 |\u001b[39m             expect(emergencyDisplay\u001b[33m.\u001b[39mtextContent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'üõ°Ô∏è'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 323 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 324 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 325 |\u001b[39m         test(\u001b[32m'should validate cached elements periodically'\u001b[39m\u001b[33m,\u001b[39m (done) \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:322:50)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üéØ DOM Management ‚Ä∫ should validate cached elements periodically\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"DOM validation\"\u001b[39m\n    Received\n           1: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM elements cached\"\u001b[39m, \u001b[31m{\"countdown\": false, \"getTokenBtn\": true, \"icon\": true, \"statusBox\": true, \"text\": true}\u001b[39m\n           2: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: DOM observer setup failed\"\u001b[39m, \u001b[31m[TypeError: Failed to execute 'observe' on 'MutationObserver': parameter 1 is not of type 'Node'.]\u001b[39m\n           3: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Emergency fallback timer started\"\u001b[39m\n\n    Number of calls: \u001b[31m4\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 336 |\u001b[39m             \u001b[90m// Check that validation detects the missing element\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 337 |\u001b[39m             setTimeout(() \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 338 |\u001b[39m                 expect(mockLogger\u001b[33m.\u001b[39mdebug)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                          \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 339 |\u001b[39m                     expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'DOM validation'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 340 |\u001b[39m                 )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 341 |\u001b[39m                 done()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:338:42\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Timeout.task [as _onTimeout] (\u001b[22m\u001b[2mnode_modules/jsdom/lib/jsdom/browser/Window.js\u001b[2m:579:19)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üéØ DOM Management ‚Ä∫ should validate cached elements periodically\u001b[39m\u001b[22m\n\n    thrown: \"Exceeded timeout of 30000 ms for a test while waiting for `done()` to be called.\n    Add a timeout value to this test to increase the timeout, if this is a long-running test. See https://jestjs.io/docs/api#testname-fn-timeout.\"\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 323 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 324 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 325 |\u001b[39m         test(\u001b[32m'should validate cached elements periodically'\u001b[39m\u001b[33m,\u001b[39m (done) \u001b[33m=>\u001b[39m {\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m         \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 326 |\u001b[39m             \u001b[36mconst\u001b[39m statusBox \u001b[33m=\u001b[39m document\u001b[33m.\u001b[39mgetElementById(\u001b[32m'global-token-status'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 327 |\u001b[39m             \u001b[22m\n\u001b[2m     \u001b[90m 328 |\u001b[39m             \u001b[90m// Start the manager\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:325:9\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:279:5\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:128:1\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üéØ DOM Management ‚Ä∫ should validate cached elements periodically\u001b[39m\u001b[22m\n\n    SyntaxError: Unexpected token '{'\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Runtime.loadEsmModule (\u001b[22m\u001b[2mnode_modules/jest-runtime/build/index.js\u001b[2m:521:20)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üéØ DOM Management ‚Ä∫ should validate cached elements periodically\u001b[39m\u001b[22m\n\n    SyntaxError: Unexpected token '{'\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Runtime.loadEsmModule (\u001b[22m\u001b[2mnode_modules/jest-runtime/build/index.js\u001b[2m:521:20)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ ‚ö° Real-time Updates ‚Ä∫ should format time correctly\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32m\"1\u001b[7mh 1m 1s\u001b[27m\"\u001b[39m\n    Received: \u001b[31m\"1\u001b[7m016h 56m\u001b[27m\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 364 |\u001b[39m                 \u001b[90m// Access the internal formatTime method through the bulletproof manager\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 365 |\u001b[39m                 \u001b[36mconst\u001b[39m formatted \u001b[33m=\u001b[39m bulletproofManager\u001b[33m.\u001b[39mformatTime(seconds \u001b[33m*\u001b[39m \u001b[35m1000\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 366 |\u001b[39m                 expect(formatted)\u001b[33m.\u001b[39mtoBe(expected)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 367 |\u001b[39m             })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 368 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 369 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat \u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:366:35\u001b[22m\u001b[2m\u001b[22m\n\u001b[2m          at Array.forEach (<anonymous>)\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:363:23)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ ‚ö° Real-time Updates ‚Ä∫ should update token display with time remaining\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected substring: \u001b[32m\"Expires in\"\u001b[39m\n    Received string:    \u001b[31m\"Token loading...\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 380 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 381 |\u001b[39m             \u001b[36mconst\u001b[39m statusText \u001b[33m=\u001b[39m document\u001b[33m.\u001b[39mquerySelector(\u001b[32m'.global-token-text'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 382 |\u001b[39m             expect(statusText\u001b[33m.\u001b[39mtextContent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Expires in'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 383 |\u001b[39m             expect(statusText\u001b[33m.\u001b[39mtextContent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'30m'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 384 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 385 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:382:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ ‚ö° Real-time Updates ‚Ä∫ should show expired status for expired tokens\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected substring: \u001b[32m\"Token expired\"\u001b[39m\n    Received string:    \u001b[31m\"Token loading...\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 395 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 396 |\u001b[39m             \u001b[36mconst\u001b[39m statusText \u001b[33m=\u001b[39m document\u001b[33m.\u001b[39mquerySelector(\u001b[32m'.global-token-text'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 397 |\u001b[39m             expect(statusText\u001b[33m.\u001b[39mtextContent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Token expired'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 398 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 399 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 400 |\u001b[39m         test(\u001b[32m'should show no token status when token is missing'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:397:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ ‚ö° Real-time Updates ‚Ä∫ should show no token status when token is missing\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected substring: \u001b[32m\"No token\"\u001b[39m\n    Received string:    \u001b[31m\"Token loading...\"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 408 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 409 |\u001b[39m             \u001b[36mconst\u001b[39m statusText \u001b[33m=\u001b[39m document\u001b[33m.\u001b[39mquerySelector(\u001b[32m'.global-token-text'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 410 |\u001b[39m             expect(statusText\u001b[33m.\u001b[39mtextContent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'No token'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                            \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 411 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 412 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 413 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:410:44)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üîÑ Error Handling and Recovery ‚Ä∫ should recover from DOM element removal\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoContain\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // indexOf\u001b[22m\n\n    Expected substring: \u001b[32m\"Expires in\"\u001b[39m\n    Received string:    \u001b[31m\"\u001b[39m\n    \u001b[31m                    üîë\u001b[39m\n    \u001b[31m                    Token loading...\u001b[39m\n    \u001b[31m                \"\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 452 |\u001b[39m             \u001b[90m// First update should work\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 453 |\u001b[39m             wrappedManager\u001b[33m.\u001b[39mupdateGlobalTokenStatus()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 454 |\u001b[39m             expect(statusBox\u001b[33m.\u001b[39mtextContent)\u001b[33m.\u001b[39mtoContain(\u001b[32m'Expires in'\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                           \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 455 |\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 456 |\u001b[39m             \u001b[90m// Remove element\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 457 |\u001b[39m             statusBox\u001b[33m.\u001b[39mremove()\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:454:43)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üîÑ Error Handling and Recovery ‚Ä∫ should handle multiple simultaneous errors gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"emergency fallback\"\u001b[39m\n\n    Number of calls: \u001b[31m0\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 478 |\u001b[39m             })\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoThrow()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 479 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 480 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39mwarn)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 481 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'emergency fallback'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 482 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 483 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:480:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üßπ Memory Management and Cleanup ‚Ä∫ should clean up resources on destroy\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"üõ°Ô∏è Bulletproof Token Manager destroyed\"\u001b[39m\n    Received\n           1: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Created\"\u001b[39m\n           2: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Initializing...\"\u001b[39m\n           3: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Initialized successfully\"\u001b[39m\n\n    Number of calls: \u001b[31m4\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 498 |\u001b[39m             bulletproofManager\u001b[33m.\u001b[39mdestroy()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 499 |\u001b[39m             \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 500 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 501 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'üõ°Ô∏è Bulletproof Token Manager destroyed'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 502 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 503 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:500:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1müõ°Ô∏è Bulletproof Token Manager Tests ‚Ä∫ üîß Integration Tests ‚Ä∫ should integrate with app cleanup lifecycle\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mjest.fn()\u001b[39m\u001b[2m).\u001b[22mtoHaveBeenCalledWith\u001b[2m(\u001b[22m\u001b[32m...expected\u001b[39m\u001b[2m)\u001b[22m\n\n    Expected: \u001b[32mStringContaining \"cleanup\"\u001b[39m\n    Received\n           1: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Created\"\u001b[39m\n           2: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Initializing...\"\u001b[39m\n           3: \u001b[31m\"üõ°Ô∏è BULLETPROOF TOKEN MANAGER: Initialized successfully\"\u001b[39m\n\n    Number of calls: \u001b[31m3\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 618 |\u001b[39m             window\u001b[33m.\u001b[39mdispatchEvent(\u001b[36mnew\u001b[39m \u001b[33mEvent\u001b[39m(\u001b[32m'beforeunload'\u001b[39m))\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 619 |\u001b[39m             \u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 620 |\u001b[39m             expect(mockLogger\u001b[33m.\u001b[39minfo)\u001b[33m.\u001b[39mtoHaveBeenCalledWith(\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 621 |\u001b[39m                 expect\u001b[33m.\u001b[39mstringContaining(\u001b[32m'cleanup'\u001b[39m)\u001b[22m\n\u001b[2m     \u001b[90m 622 |\u001b[39m             )\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 623 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/bulletproof-token-manager.test.js\u001b[39m\u001b[0m\u001b[2m:620:37)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[0m\u001b[7m\u001b[1m\u001b[31m FAIL \u001b[39m\u001b[22m\u001b[27m\u001b[0m \u001b[2mtest/unit/\u001b[22m\u001b[1mapi-testing-dashboard.test.js\u001b[22m\n  API Testing Dashboard with Subsystem Integration\n    Dashboard Initialization\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould initialize successfully with all subsystems online (45 ms)\u001b[22m\n      \u001b[31m‚úï\u001b[39m \u001b[2mshould handle initialization failure gracefully (11 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould update overall status correctly (7 ms)\u001b[22m\n    Subsystem Status Monitoring\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould create subsystem cards correctly (6 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould test subsystem status and update UI accordingly (5 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle subsystem failures correctly (5 ms)\u001b[22m\n    API Testing Functionality\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould perform API tests and display results (7 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle API test failures (5 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle network errors in API tests (10 ms)\u001b[22m\n    Swagger Integration Validation\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould validate Swagger integration successfully (11 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle partial Swagger integration failures (9 ms)\u001b[22m\n    Event-driven Integration\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle subsystem status update events (3 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle API test completion events (6 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould dispatch API test completion events (5 ms)\u001b[22m\n    Endpoint Discovery\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould load and display API endpoints from Swagger spec (6 ms)\u001b[22m\n      \u001b[32m‚úì\u001b[39m \u001b[2mshould handle endpoint loading failures gracefully (3 ms)\u001b[22m\n\n\u001b[1m\u001b[31m  \u001b[1m‚óè \u001b[22m\u001b[1mAPI Testing Dashboard with Subsystem Integration ‚Ä∫ Dashboard Initialization ‚Ä∫ should handle initialization failure gracefully\u001b[39m\u001b[22m\n\n    \u001b[2mexpect(\u001b[22m\u001b[31mreceived\u001b[39m\u001b[2m).\u001b[22mtoBe\u001b[2m(\u001b[22m\u001b[32mexpected\u001b[39m\u001b[2m) // Object.is equality\u001b[22m\n\n    Expected: \u001b[32mfalse\u001b[39m\n    Received: \u001b[31mtrue\u001b[39m\n\u001b[2m\u001b[22m\n\u001b[2m    \u001b[0m \u001b[90m 352 |\u001b[39m       \u001b[36mconst\u001b[39m result \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m dashboard\u001b[33m.\u001b[39minitialize()\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 353 |\u001b[39m\u001b[22m\n\u001b[2m    \u001b[31m\u001b[1m>\u001b[22m\u001b[2m\u001b[39m\u001b[90m 354 |\u001b[39m       expect(result)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m     |\u001b[39m                      \u001b[31m\u001b[1m^\u001b[22m\u001b[2m\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 355 |\u001b[39m       expect(dashboard\u001b[33m.\u001b[39misInitialized)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 356 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[22m\n\u001b[2m     \u001b[90m 357 |\u001b[39m\u001b[0m\u001b[22m\n\u001b[2m\u001b[22m\n\u001b[2m      \u001b[2mat Object.<anonymous> (\u001b[22m\u001b[2m\u001b[0m\u001b[36mtest/unit/api-testing-dashboard.test.js\u001b[39m\u001b[0m\u001b[2m:354:22)\u001b[22m\u001b[2m\u001b[22m\n\n\u001b[0m\u001b[7m\u001b[1m\u001b[31m FAIL \u001b[39m\u001b[22m\u001b[27m\u001b[0m \u001b[2mtest/unit/\u001b[22m\u001b[1mpopulation-service.test.js\u001b[22m\n  \u001b[1m‚óè \u001b[22mTest suite failed to run\n\n    Cannot find module '../../public/js/modules/population-service.js' from 'test/unit/population-service.test.js'\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22mnode_modules/jest-resolve/build/index.js\u001b[2m:863:11)\u001b[22m\n\n\u001b[0m\u001b[7m\u001b[1m\u001b[31m FAIL \u001b[39m\u001b[22m\u001b[27m\u001b[0m \u001b[2mtest/unit/\u001b[22m\u001b[1mtoken-service.test.js\u001b[22m\n  \u001b[1m‚óè \u001b[22mTest suite failed to run\n\n    Cannot find module '../../public/js/modules/token-management/token-service.js' from 'test/unit/token-service.test.js'\n\n      \u001b[2mat Resolver._throwModNotFoundError (\u001b[22mnode_modules/jest-resolve/build/index.js\u001b[2m:863:11)\u001b[22m\n\n/Users/cmuir/P1Import-apps/P1-import-Subsystem/test/unit/bulletproof-global-handler.test.js:114\n            const reason = new Error('Promise rejection test');\n                           ^\n\n[Error: Promise rejection test]\n\nNode.js v22.16.0\n",
  "output": "Tests failed with code 1"
}