<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ccc; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>Settings Subsystem Test</h1>
    
    <div class="test-section">
        <h2>Button Detection Test</h2>
        <div id="button-test-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Event Listener Test</h2>
        <div id="event-test-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Console Log Test</h2>
        <div id="console-test-results"></div>
    </div>

    <script>
        // Test button detection
        function testButtonDetection() {
            const results = document.getElementById('button-test-results');
            const buttons = {
                'save-settings': document.getElementById('save-settings'),
                'test-connection-btn': document.getElementById('test-connection-btn'),
                'get-token-btn': document.getElementById('get-token-btn'),
                'toggle-api-secret-visibility': document.getElementById('toggle-api-secret-visibility')
            };
            
            let html = '<h3>Button Detection Results:</h3>';
            Object.entries(buttons).forEach(([id, button]) => {
                if (button) {
                    html += `<p class="success">✅ Found button: ${id}</p>`;
                } else {
                    html += `<p class="error">❌ Missing button: ${id}</p>`;
                }
            });
            results.innerHTML = html;
        }
        
        // Test event listeners
        function testEventListeners() {
            const results = document.getElementById('event-test-results');
            const saveBtn = document.getElementById('save-settings');
            
            if (saveBtn) {
                // Add a test event listener
                saveBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    results.innerHTML += '<p class="success">✅ Save button click event fired!</p>';
                });
                results.innerHTML = '<p class="info">ℹ️ Test event listener added to save button. Click the save button to test.</p>';
            } else {
                results.innerHTML = '<p class="error">❌ Save button not found, cannot test event listeners</p>';
            }
        }
        
        // Test console logging
        function testConsoleLogging() {
            const results = document.getElementById('console-test-results');
            
            // Test safe logger access pattern
            const testLogger = undefined;
            const infoLog = testLogger?.info || testLogger?.log || console.log;
            const errorLog = testLogger?.error || testLogger?.log || console.error;
            const warnLog = testLogger?.warn || testLogger?.log || console.warn;
            
            infoLog('Test info message');
            errorLog('Test error message');
            warnLog('Test warning message');
            
            results.innerHTML = '<p class="success">✅ Console logging test completed. Check browser console for messages.</p>';
        }
        
        // Run tests when page loads
        window.addEventListener('load', () => {
            testButtonDetection();
            testEventListeners();
            testConsoleLogging();
        });
    </script>
</body>
</html>
